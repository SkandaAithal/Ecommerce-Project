{"version":3,"file":"static/js/905.2c6b51a9.chunk.js","mappings":"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","sources":["Components/AddProduct.jsx"],"sourcesContent":["import React, { useCallback, useEffect, useReducer, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport reducerFunction from \"../Reducer/addproductReducer\";\r\nimport { useUserContext } from \"../context/userscontext\";\r\nimport ImageUploader from \"./ImageUploader\";\r\nimport Colors from \"./Colors\";\r\nimport ProductForm from \"./ProductForm\";\r\nimport AddProductInputRange from \"./AddProductInputRange\";\r\nimport axios from \"axios\";\r\nimport { decrypt } from \"../helpers/encryptdecrypt\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction AddProduct() {\r\n  const { dispatchUser } = useUserContext();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [istoken, setIsToken] = useState(\"\");\r\n  const [productAdded, setProductAdded] = useState(false);\r\n  const ADD_PRODUCT_URL = \"https://ecommerce-server.uk.to/products/addproduct\";\r\n  const initialState = {\r\n    name: \"\",\r\n    company: \"\",\r\n    price: \"\",\r\n    description: \"\",\r\n    category: \"\",\r\n    shipping: true,\r\n    featured: false,\r\n    stock: \"\",\r\n    reviews: \"\",\r\n    stars: 5,\r\n    colors: [],\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n  const secretKey = \"sX8nD4zH1cT6kA2yP7uV3wR9qG5pL0J9\";\r\n  const [state, dispatchAddProduct] = useReducer(reducerFunction, initialState);\r\n\r\n  const encryptToken = localStorage.getItem(\"userToken\");\r\n\r\n  //! to check for token\r\n  useEffect(() => {\r\n    if (!encryptToken) {\r\n      dispatchUser({\r\n        type: \"SHOW_NOTIFICATION\",\r\n        payload: {\r\n          message: \"You must be logged in to add your product\",\r\n          color: \"red\",\r\n        },\r\n      });\r\n      dispatchUser({ type: \"OPEN_LOGIN\" });\r\n      navigate(\"/\");\r\n    } else {\r\n      const token = decrypt(encryptToken, secretKey);\r\n      setIsToken(token);\r\n    }\r\n  }, [state]);\r\n\r\n  // ! add color to product\r\n  const addcolorToArray = useCallback(\r\n    (color) => {\r\n      if (state.colors.includes(color)) {\r\n        dispatchUser({\r\n          type: \"SHOW_NOTIFICATION\",\r\n          payload: {\r\n            message: \"You have already selected that color\",\r\n            color: \"red\",\r\n          },\r\n        });\r\n      } else {\r\n        dispatchAddProduct({ type: \"ADD_COLOR\", payload: color });\r\n      }\r\n    },\r\n    [state.colors]\r\n  );\r\n\r\n  const removeColor = useCallback(\r\n    (index) => {\r\n      dispatchAddProduct({ type: \"REMOVE_COLOR\", payload: index });\r\n    },\r\n    [state.colors]\r\n  );\r\n\r\n  const productSubmit = async (e) => {\r\n    try {\r\n      setIsLoading(true);\r\n      e.preventDefault();\r\n\r\n      if (\r\n        Object.values(state).every(\r\n          (data) =>\r\n            data !== \"\" && (Array.isArray(data) ? data.length > 0 : true)\r\n        )\r\n      ) {\r\n        const submitData = {};\r\n        Object.keys(state).forEach((key) => {\r\n          const value = state[key];\r\n          submitData[key] =\r\n            typeof value === \"string\" ? value.toLowerCase().trim() : value;\r\n        });\r\n\r\n        await axios.post(ADD_PRODUCT_URL, submitData, {\r\n          headers: {\r\n            authorization: istoken,\r\n          },\r\n        });\r\n\r\n        dispatchUser({\r\n          type: \"SHOW_NOTIFICATION\",\r\n          payload: {\r\n            message: \"Your Product has been successfully submitted\",\r\n            color: \"green\",\r\n          },\r\n        });\r\n        setProductAdded(true);\r\n      } else {\r\n        dispatchUser({\r\n          type: \"SHOW_NOTIFICATION\",\r\n          payload: {\r\n            message: \"Please fill in all product details before submitting.\",\r\n            color: \"red\",\r\n          },\r\n        });\r\n      }\r\n    } catch (err) {\r\n      dispatchUser({\r\n        type: \"SHOW_NOTIFICATION\",\r\n        payload: {\r\n          message: err.response.data.message,\r\n          color: \"red\",\r\n        },\r\n      });\r\n    } finally {\r\n      window.scrollTo(0, 0);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <Wrapper>\r\n      {productAdded ? (\r\n        <ImageUploader productName={state.name.toLowerCase().trim()} />\r\n      ) : (\r\n        <div className=\"addproduct-container\">\r\n          <h2 style={{ marginBottom: \"1rem\" }}>Add Your Product!</h2>\r\n\r\n          <form onSubmit={productSubmit}>\r\n            <ProductForm\r\n              dispatchAddProduct={dispatchAddProduct}\r\n              state={state}\r\n              updation={false}\r\n            />\r\n            <AddProductInputRange\r\n              dispatchAddProduct={dispatchAddProduct}\r\n              stars={state.stars}\r\n            />\r\n            <Colors\r\n              colors={state.colors}\r\n              addcolorToArray={addcolorToArray}\r\n              removeColor={removeColor}\r\n            />\r\n\r\n            <div>\r\n              {isLoading ? (\r\n                <input type=\"submit\" value={\"Loading..\"} disabled />\r\n              ) : (\r\n                <input type=\"submit\" value={\"Add product\"} />\r\n              )}\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  .addproduct-container {\r\n    width: 60vw;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n    display: grid;\r\n    gap: 2rem;\r\n    text-align: center;\r\n    justify-content: center;\r\n    align-items: center;\r\n    form {\r\n      display: grid;\r\n      gap: 2rem;\r\n    }\r\n    .color-container {\r\n      display: flex;\r\n      justify-content: center;\r\n      text-align: center;\r\n\r\n      flex-direction: column;\r\n    }\r\n    .colors {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      gap: 1rem;\r\n      margin: auto;\r\n\r\n      .color-box {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-right: 10px;\r\n      }\r\n\r\n      .color {\r\n        width: 2.5rem;\r\n        height: 2.5rem;\r\n        border-radius: 50%;\r\n\r\n        box-shadow: 0px 0px 5px 2px #dad9db;\r\n      }\r\n\r\n      .cross {\r\n        color: #ff0000;\r\n        cursor: pointer;\r\n        margin-left: 5px;\r\n      }\r\n    }\r\n  }\r\n\r\n  input[type=\"submit\"] {\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n\r\n    min-width: fit-content;\r\n    margin: 3rem auto;\r\n    &:hover {\r\n      background-color: ${({ theme }) => theme.colors.white};\r\n      border: 1px solid ${({ theme }) => theme.colors.btn};\r\n      color: ${({ theme }) => theme.colors.btn};\r\n      transform: scale(0.9);\r\n    }\r\n  }\r\n  label,\r\n  h3 {\r\n    font-size: 1.75rem;\r\n    font-weight: bold;\r\n    font-family: \"Trebuchet MS\", \"Lucida Sans Unicode\", \"Lucida Grande\",\r\n      \"Lucida Sans\", Arial, sans-serif;\r\n  }\r\n\r\n  @media (max-width: 998px) {\r\n    .addproduct-container {\r\n      width: 100dvw;\r\n    }\r\n    input,\r\n    textarea {\r\n      min-width: 60dvw;\r\n    }\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    .addproduct-container {\r\n      width: 100dvw;\r\n    }\r\n    input,\r\n    textarea {\r\n      min-width: 70dvw;\r\n    }\r\n  }\r\n  @media (max-width: 400px) {\r\n    .addproduct-container {\r\n      width: 100dvw;\r\n    }\r\n    input,\r\n    textarea {\r\n      min-width: 90dvw;\r\n    }\r\n  }\r\n`;\r\nexport default AddProduct;\r\n"],"names":["Wrapper","styled","theme","colors","white","btn","dispatchUser","useUserContext","useState","isLoading","setIsLoading","istoken","setIsToken","productAdded","setProductAdded","navigate","useNavigate","useReducer","reducerFunction","name","company","price","description","category","shipping","featured","stock","reviews","stars","state","dispatchAddProduct","encryptToken","localStorage","getItem","useEffect","token","decrypt","type","payload","message","color","addcolorToArray","useCallback","includes","removeColor","index","productSubmit","e","preventDefault","Object","values","every","data","Array","isArray","length","submitData","keys","forEach","key","value","toLowerCase","trim","axios","headers","authorization","response","window","scrollTo","productName","className","style","marginBottom","onSubmit","updation","disabled"],"sourceRoot":""}